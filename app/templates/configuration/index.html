{% from "macros/forms.html" import render_form_field, render_form_fields %}
{%extends "base.html" %} 
{%block content%} 

<div class="container-fluid">
  <h2>Configuration panel for profile <b class="mark">{{ profile }}</b> </h2>
  <br>
  <p><strong>Note:</strong> {{config[block].description}}</p>
  <ul class="nav nav-pills">
      {% for item in blocks %}
      <li class="nav-item">
          {% if item==block %}
          <a class="nav-link active" href="{{ url_for('configuration.set', block=item) }}">{{ item }}</a>
          {% else %}
          <a class="nav-link" href="{{ url_for('configuration.set', block=item) }}">{{ item }}</a>
          {% endif %}
      </li>
      {% endfor %}
  </ul>

  <div class="card" style="width:600px">
      <div class="card-header bg-primary text-white">Run configuration</div>
      <div class="card-body">
          <form method="POST">
              {{ form.hidden_tag() }}
              {% for v,keys in config[block].data_var.items() %}
              <div class="input-group mb-3">
                  {{ render_form_fields(keys,form) }}
              </div>
              {% endfor %}
              <input type="submit" class="btn btn-primary" value='Update'>
          </form>
      </div>
  </div>
</div>

<p> Debug: </p>
<ul>
{% for field in form %}
<li>{{ field.data }}</li>
{% endfor %}
</ul>

{% endblock %}

{%block scripts%} 
  document.querySelector('#menu-conf .nav-link').classList.add('active');
{% endblock %}
